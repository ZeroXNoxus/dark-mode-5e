/*General Dark Mode Changes*/
body.dark :not(.tidy5e, [data-sheet-module="tidy5e-sheet"]) input, 
body.dark :not(.tidy5e, [data-sheet-module="tidy5e-sheet"]) select {
    background: transparent;
}
body.dark .filepicker .tiles-list li img { filter: invert(1); }
body.dark .editor-content img { filter: invert(1); }
/*body.dark .editing-source textarea { color: var(--color-text-light-highlight); }*/
body.dark .window-app:not(.tidy5e, [data-sheet-module="tidy5e-sheet"], .dnd5e2, #paper-doll, #always-hp, [background-image], [sidebar-image]) .window-content { filter: invert(1); }
body.dark .window-app:not(.tidy5e, [data-sheet-module="tidy5e-sheet"], .dnd5e2, #paper-doll, #always-hp, [background-image], [sidebar-image]) .window-content canvas {
    filter: invert(1);
}
body.dark .window-app:not(.tidy5e, [data-sheet-module="tidy5e-sheet"], .dnd5e2, #paper-doll, #always-hp, [background-image], [sidebar-image]) input[type="color"] { filter: invert(1); }
body.dark aside button {
    filter: invert(1);
    color: var(--color-text-dark-primary);
}
body.dark select option { 
    background: var(--color-text-dark-2);
    color: var(--color-text-light-2);
}
body.dark .window-app #context-menu { filter: invert(1); }
body.dark.change-windows .sheet:not(.tidy5e, [data-sheet-module="tidy5e-sheet"]) #context-menu {
    filter: invert(1);
    text-shadow: none;
}
body.dark.change-windows :not(.tidy5e, [data-sheet-module="tidy5e-sheet"]) #context-menu li:hover { color: black; }
body.dark :is(#tooltip, .locked-tooltip).dnd5e-tooltip { filter: invert(1); }
body.dark :is(#tooltip, .locked-tooltip).dnd5e-tooltip img { filter: invert(1); }
body.dark #ability-use-form .notification { filter: invert(1); }
body.dark .window-app.sheet.active-effect-sheet .window-content .sheet-header img.effect-icon { filter: invert(1); }

/*DnD 5th Edition v1 Sheet (2.1.4 and lower)*/
body.dark .dnd5e.sheet:not(.tidy5e, [data-sheet-module="tidy5e-sheet"], #paper-doll, #always-hp, [background-image], [sidebar-image]) .window-content { filter:invert(1); }
body.dark .dnd5e.sheet:not(.tidy5e, [data-sheet-module="tidy5e-sheet"], #paper-doll, #always-hp, [background-image], [sidebar-image]) .window-content img,
body.dark .dnd5e.sheet:not(.tidy5e, [data-sheet-module="tidy5e-sheet"], #paper-doll, #always-hp, [background-image], [sidebar-image]) .window-content .item-image,
body.dark .dnd5e.sheet:not(.tidy5e, [data-sheet-module="tidy5e-sheet"], #paper-doll, #always-hp, [background-image], [sidebar-image]) .window-content .item-image:hover {
    filter:invert(1);
}

/*v1 Dark Inventory Changes*/
body.dark .dnd5e.sheet:not(.tidy5e, [data-sheet-module="tidy5e-sheet"], #paper-doll, #always-hp, [background-image], [sidebar-image]) .inventory-list .item-summary ol { filter: invert(1); }
body.dark .dnd5e.sheet:not(.tidy5e, [data-sheet-module="tidy5e-sheet"], #paper-doll, #always-hp, [background-image], [sidebar-image]) .inventory-list .item .item-name.rollable .item-image:hover { filter: invert(0); }
body.dark .dnd5e.sheet:not(.tidy5e, [data-sheet-module="tidy5e-sheet"], #paper-doll, #always-hp, [background-image], [sidebar-image]) .capacity, 
body.dark .dnd5e.sheet:not(.tidy5e, [data-sheet-module="tidy5e-sheet"], #paper-doll, #always-hp, [background-image], [sidebar-image]) .encumbrance {
    filter: invert(1);
}

/*DnD 5th Edition v2 Sheet (3.0.0 and higher)*/
body.dark .dnd5e2.sheet:not(.tidy5e, [data-sheet-module="tidy5e-sheet"], #paper-doll, #always-hp, [background-image], [sidebar-image]) { background: var(--color-text-dark-primary); }
body.dark .dnd5e2.sheet:not(.tidy5e, [data-sheet-module="tidy5e-sheet"], #paper-doll, [background-image], [sidebar-image]) .sheet-body {
    filter: invert(1);
    backdrop-filter: grayscale(1);
}
body.dark .dnd5e2.sheet:not(.tidy5e, [data-sheet-module="tidy5e-sheet"], #paper-doll, #always-hp, [background-image], [sidebar-image]) header.sheet-header { filter: grayscale(1); }
body.dark .dnd5e2.sheet:not(.tidy5e, [data-sheet-module="tidy5e-sheet"], #paper-doll, #always-hp, [background-image], [sidebar-image]) .right div button.gold-button { filter: grayscale(0 ); }
body.dark .dnd5e2.sheet:not(.tidy5e, [data-sheet-module="tidy5e-sheet"], #paper-doll, #always-hp, [background-image], [sidebar-image]) .sheet-body .sidebar,
body.dark .dnd5e2.sheet:not(.tidy5e, [data-sheet-module="tidy5e-sheet"], #paper-doll, #always-hp, [background-image], [sidebar-image]) .sheet-body .right img {
    filter: invert(1);
}
body.dark .dnd5e2.sheet:not(.tidy5e, [data-sheet-module="tidy5e-sheet"], #paper-doll, #always-hp, [background-image], [sidebar-image]) .sheet-body .sidebar .favorites { filter: invert(1); }
body.dark .dnd5e2.sheet:not(.tidy5e, [data-sheet-module="tidy5e-sheet"], #paper-doll, #always-hp, [background-image], [sidebar-image]) .sheet-body .sidebar .favorites img { filter: invert(1); }
body.dark .dnd5e2.sheet:not(.tidy5e, [data-sheet-module="tidy5e-sheet"], #paper-doll, #always-hp, [background-image], [sidebar-image]) .sheet-body .card .tmp,
body.dark .dnd5e2.sheet:not(.tidy5e, [data-sheet-module="tidy5e-sheet"], #paper-doll, #always-hp, [background-image], [sidebar-image]) .sheet-body .card .header {
    filter: invert(1) hue-rotate(230deg);
}
body.dark .dnd5e2.sheet:not(.tidy5e, [data-sheet-module="tidy5e-sheet"], #paper-doll, #always-hp, [background-image], [sidebar-image]) .ability-scores .ability-score { filter: drop-shadow(0 0 6px var(--dnd5e-shadow-45)) invert(1); }
body.dark .dnd5e2.sheet:not(.tidy5e, [data-sheet-module="tidy5e-sheet"], #paper-doll, #always-hp, [background-image], [sidebar-image]) :is(#tooltip, .locked-tooltip) { filter: invert(1); }
body.dark .dnd5e2.sheet:not(.tidy5e, [data-sheet-module="tidy5e-sheet"], #paper-doll, #always-hp, [background-image], [sidebar-image]) .classes .class .icons img { filter: invert(1); }

/*v2 Dark Inventory Changes*/
body.dark .dnd5e2.sheet:not(.tidy5e, [data-sheet-module="tidy5e-sheet"], #paper-doll, #always-hp, [background-image], [sidebar-image]) .containers .container img { filter: invert(1); }
body.dark .dnd5e2.sheet:not(.tidy5e, [data-sheet-module="tidy5e-sheet"], #paper-doll, #always-hp, [background-image], [sidebar-image]) .items-list .item-image { filter: invert(1); }
body.dark .dnd5e2.sheet:not(.tidy5e, [data-sheet-module="tidy5e-sheet"], #paper-doll, #always-hp, [background-image], [sidebar-image]) section.currency { filter: invert(1); }
body.dark .dnd5e2.sheet:not(.tidy5e, [data-sheet-module="tidy5e-sheet"], #paper-doll, #always-hp, [background-image], [sidebar-image])  section.currency input, 
body.dark .dnd5e2.sheet:not(.tidy5e, [data-sheet-module="tidy5e-sheet"], #paper-doll, #always-hp, [background-image], [sidebar-image])  .currency-style input {
    filter: invert(1);
}
body.dark .dnd5e2.sheet:not(.tidy5e, [data-sheet-module="tidy5e-sheet"], #paper-doll, #always-hp, [background-image], [sidebar-image])  i.currency { z-index: 1; }
body.dark .dnd5e2.sheet:not(.tidy5e, [data-sheet-module="tidy5e-sheet"], #paper-doll, #always-hp, [background-image], [sidebar-image]) section.currency button, 
body.dark .dnd5e2.sheet:not(.tidy5e, [data-sheet-module="tidy5e-sheet"], #paper-doll, #always-hp, [background-image], [sidebar-image]) .currency-style button {
    filter: invert(1);
}
body.dark .dnd5e2.sheet:not(.tidy5e, [data-sheet-module="tidy5e-sheet"], #paper-doll, #always-hp, [background-image], [sidebar-image]) .encumbrance .meter { filter: invert(1); }
body.dark .dnd5e2.sheet:not(.tidy5e, [data-sheet-module="tidy5e-sheet"], #paper-doll, #always-hp, [background-image], [sidebar-image]) .sheet-header .right .form-fields { color: white; }

/*FoundryVTT Dark Chat Changes*/
body.dark :is(.chat-popout, #chat-log) .message:not(.dnd5e-cm-message) {
    background: unset;
    background-color: #0e1417;
}
body.dark :is(.chat-popout, #chat-log) .message.whisper:not(.dnd5e-cm-message) {
    background: unset;
    background-color: #1b131e;
}
body.dark :is(.chat-popout, #chat-log) .message.whisper.blind:not(.dnd5e-cm-message) {
    background: unset;
    background-color: #261b2b;
}
body.dark :is(.chat-popout, #chat-log) .message>*:not(nav),
body.dark :is(.chat-popout, #chat-log) .message img {
    filter: invert(1);
}
body.dark .sidebar-tab .chat-message button { filter: invert(0); }
body.dark :is(.chat-popout, #chat-log) .message::before { filter: invert(1); }
body.dark textarea#chat-message,
body.dark #sidebar #chat-controls select {
    filter: invert(1);
}
body.dark #sidebar #chat-controls select option, 
body.dark #sidebar #chat-controls select optgroup {
    background-color: #0e1417;
    color: var(--color-text-light-highlight);
}
body.dark :is(.chat-popout, #chat-log) .message>*:not(nav) .critical { filter: hue-rotate(180deg); }
body.dark :is(.chat-popout, #chat-log) .message>*:not(nav) .fumble { filter: hue-rotate(180deg); }
body.dark :is(.chat-popout, #chat-log) .message>*:not(nav) .dice-tooltip .dice-rolls .roll.min,
body.dark :is(.chat-popout, #chat-log) .message>*:not(nav) .dice-tooltip .dice-rolls .roll.failure {
    filter: hue-rotate(180deg);
}
body.dark :is(.chat-popout, #chat-log) .message>*:not(nav) .dice-tooltip .dice-rolls .roll.max, 
body.dark :is(.chat-popout, #chat-log) .message>*:not(nav) .dice-tooltip .dice-rolls .roll.success {
    filter: hue-rotate(180deg);
}
body.dark div#chat-popout {
    filter: invert(1);
    background-color: rgba(255,255,255,0.5);
    color: black;
}
body.dark div#chat-popout .item.active { color: black; }

/*DnD 5th Edition v1 Sheet (2.1.4 and lower) Proficiency Highlighting*/
.dnd5e.sheet:not(.tidy5e, [data-sheet-module="tidy5e-sheet"], #paper-doll, [background-image], [sidebar-image]) .ability-modifiers input[value="1"] ~ span.ability-save,
.dnd5e.sheet:not(.tidy5e, [data-sheet-module="tidy5e-sheet"], #paper-doll, [background-image], [sidebar-image]) .skill input[value="1"] ~ span.skill-mod {
    color: var(--color-border-highlight-alt);
}
.dnd5e.sheet:not(.tidy5e, [data-sheet-module="tidy5e-sheet"], #paper-doll, [background-image], [sidebar-image]) .skill input[value="0.5"] ~ span.skill-mod {
    text-shadow: 0px 0px 5px var(--color-border-highlight-alt);
}
.dnd5e.sheet:not(.tidy5e, [data-sheet-module="tidy5e-sheet"], #paper-doll, [background-image], [sidebar-image]) .skill input[value="2"] ~ span.skill-mod {
    color: var(--color-text-light-highlight);
    text-shadow: 0px 0px 10px var(--color-shadow-dark), 
                 0px 0px 5px  var(--color-border-highlight-alt);
}

/*DnD 5th Edition v2 Sheet (3.0.0 and higher) Proficiency Highlighting*/
.dnd5e2.sheet:not(.tidy5e, [data-sheet-module="tidy5e-sheet"], #paper-doll, [background-image], [sidebar-image]) proficiency-cycle[value="1"] ~ div.bonus {
    color: var(--color-border-highlight-alt);
}
.dnd5e2.sheet:not(.tidy5e, [data-sheet-module="tidy5e-sheet"], #paper-doll, [background-image], [sidebar-image]) proficiency-cycle[value="0.5"] ~ div.bonus {
    text-shadow: 0px 0px 3px var(--color-border-highlight-alt);
}
.dnd5e2.sheet:not(.tidy5e, [data-sheet-module="tidy5e-sheet"], #paper-doll, [background-image], [sidebar-image]) proficiency-cycle[value="2"] ~ div.bonus {
    color: var(--color-text-light-highlight);
    text-shadow: 0px 0px 3px var(--color-shadow-dark), 
                 0px 0px 3px  var(--color-border-highlight-alt);
}

/*FoundryVTT Directory Changes*/
body:not(.pluto) .sidebar-tab.directory .action-buttons button {
    height: 20px;
    line-height: 16px;
}
body:not(.pluto) .sidebar-tab.directory .directory-list .directory-item { min-height: 30px; }
body:not(.pluto) .sidebar-tab.directory .directory-list .directory-item.document { height: 30px; }
body:not(.pluto) .sidebar-tab.directory .directory-list .directory-item h3 { line-height: 28px; }
body:not(.pluto) .sidebar-tab.directory .directory-list .directory-item h4 { line-height: 24px; }
body:not(.pluto) .sidebar-tab.directory .directory-list li header {
    padding-top: 0;
    padding-bottom: 0;
}
body:not(.pluto) .sidebar-tab.directory .directory-list li img {
    max-width: 30px;
    max-height: 30px;
    object-position: center;
}
body.dark .sidebar-tab button { filter: invert(1); }
body.dark .sidebar-tab.directory .header-search input { filter: invert(1); }
body.dark .sidebar-tab.macros-sidebar .directory-item.macro { color: var(--color-text-dark-2); }

/*FoundryVTT Configuration Changes*/
body.dark #client-settings input[type="range"] { filter: invert(1); }
body.dark #keybindings .binding .binding-controls .control.conflicts { filter: invert(1); }

/*Compendium Changes*/
body.dark .compendium.directory .directory-header .header-banner { filter: invert(1); }
body.dark .compendium.directory .directory-header .header-search a { filter: invert(1); }
body.dark .compendium.directory .directory-list { filter: invert(1); }
body.dark .compendium.directory .directory-list header.folder-header, 
body.dark .compendium.directory .directory-list .directory-item.document {
    color: var(--color-text-light-1);
}
body.dark .compendium.directory .directory-list header.folder-header h3, 
body.dark .compendium.directory .directory-list header.folder-header h4 {
    color: var(--color-text-light-1);
}
body.dark .compendium.directory ol li img { filter: invert(0); }
body.dark .compendium.directory #context-menu { filter: invert(0); }
body.dark .compendium.directory button { filter: invert(0); }

/*Journal Changes*/
body.dark .sheet.journal-entry .journal-sidebar {
    color: var(--color-text-dark-2);
}

/*Combat Tracker Changes*/
body.dark .combat-sidebar li.combatant .token-initiative .initiative { text-shadow: none; }

/*Popout Changes*/
body.dark #combat-popout .window-content { color: var(--color-text-dark-2); }
body.dark #combat-popout .combat-sidebar li.combatant .token-name .combatant-control.active { color: var(--color-text-dark-1); }
body.dark #combat-popout .window-content ol#combat-tracker img { filter: invert(1); }
body.dark #combat-popout .window-content ol#combat-tracker li.combatant .token-name { text-shadow: none; }
body.dark .image-popout figure img { filter: invert(1); }